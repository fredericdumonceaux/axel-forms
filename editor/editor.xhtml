<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:xt="http://ns.inria.org/xtiger">
<!--  
This file is a stripped down version of the original axel/editor/editor.html

It has been extended to load the axel-forms extensions

WARNING: this currently works only if axel-forms is placed as a sibling of axel in your file system

Author: Stephane Sire
-->
  <head>
    <title>AXEL-FORMS Debug Editor by Oppidoc</title>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8"></meta>
    <meta http-equiv="X-UA-Compatible" content="IE=8;"></meta>
    <meta name="description" content="XTiger XML based authoring application"></meta>
    <meta name="keywords" content="template, XTiger, XML"></meta>

    <!-- Dependency for some filters -->
    <script src="../../axel/3rd-part/jquery/js/jquery-1.7.1.min.js" type="text/javascript"></script>
    
    <!-- Dependency for 'date' filter -->
    <link rel="stylesheet" href="../../axel/3rd-part/jquery/css/ui-lightness/jquery-ui-1.8.18.custom.css" type="text/css" charset="utf-8" />
    <script src="../../axel/3rd-part/jquery/js/jquery-ui-1.8.18.custom.min.js" type="text/javascript"></script>

    <!-- BEGIN XTiger Library Loading -->
    <script type="text/javascript" src="../../axel/src/core/loader.js"></script>
    <script type="text/javascript" src="../../axel/src/core/dom.js"></script>
    <script type="text/javascript" src="../../axel/src/core/parser.js"></script>
    <script type="text/javascript" src="../../axel/src/core/domdatasource.js"></script>
    <script type="text/javascript" src="../../axel/src/core/defaultbrowser.js"></script>
    <script type="text/javascript" src="../../axel/src/core/iebrowser.js"></script>
    <script type="text/javascript" src="../../axel/src/core/filterable.js"></script>
    <script type="text/javascript" src="../../axel/src/core/domlogger.js"></script>   
    <script type="text/javascript" src="../../axel/src/core/forms.js"></script>
    <script type="text/javascript" src="../../axel/src/editor/classical/generator.js"></script>

    <!-- alternative loaders and serializers -->
    <script type="text/javascript" src="../../axel/src/editor/classical/htmlloader.js"></script>
    <script type="text/javascript" src="../../axel/src/editor/classical/xmlrobustloader.js"></script>
    <script type="text/javascript" src="../../axel/src/editor/classical/htmlserializer.js"></script>
    
    <script type="text/javascript" src="../../axel/src/editor/classical/xmlloader.js"></script>
    <script type="text/javascript" src="../../axel/src/editor/classical/xmlserializer.js"></script>
    <script type="text/javascript" src="../../axel/src/editor/classical/repeat.js"></script>
    <script type="text/javascript" src="../../axel/src/editor/classical/choice.js"></script>
    <script type="text/javascript" src="../../axel/src/editor/classical/keyboard.js"></script>
    <script type="text/javascript" src="../../axel/src/editor/classical/tabgroupmgr.js"></script>
    
    <!-- native plugins and devices -->
    <script type="text/javascript" src="../../axel/src/plugins/text.js"></script>
    <script type="text/javascript" src="../../axel/src/plugins/select.js"></script>
    <script type="text/javascript" src="../../axel/src/devices/popup.js"></script>
    <script type="text/javascript" src="../../axel/src/devices/text.js"></script>

    <!-- optional devices -->
    <!-- <script type="text/javascript" src="../../axel/src/devices/lens.js"></script>
    <script type="text/javascript" src="../../axel/src/devices/upload.js"></script>
    <script type="text/javascript" src="../../axel/src/devices/autocomplete.js"></script>
    <script type="text/javascript" src="../../axel/src/devices/trackermenu.js"></script>
    <script type="text/javascript" src="../../axel/src/plugins/content.js"></script> -->
    
    <!-- optional plugins -->
    <script type="text/javascript" src="../src/plugins/input.js"></script>
    <!-- <script type="text/javascript" src="../../axel/src/plugins/layout.js"></script>
    <script type="text/javascript" src="../../axel/src/plugins/link.js"></script>
    <script type="text/javascript" src="../../axel/src/plugins/richtext.js"></script>
    <script type="text/javascript" src="../../axel/src/plugins/video.js"></script>          
    <script type="text/javascript" src="../../axel/src/plugins/photo.js"></script>
    <script type="text/javascript" src="../../axel/src/plugins/file.js"></script> -->
        
    <!-- optional filters -->
    <!-- <script type="text/javascript" src="../../axel/src/filters/common.js"></script>         
    <script type="text/javascript" src="../../axel/src/filters/documentid.js"></script>
    <script type="text/javascript" src="../../axel/src/filters/wiki.js"></script>
    <script type="text/javascript" src="../../axel/src/filters/image.js"></script>  
    <script type="text/javascript" src="../../axel/src/filters/layout.js"></script>         
    <script type="text/javascript" src="../../axel/src/filters/video.js"></script>      
    <script type="text/javascript" src="../../axel/src/filters/autocomplete.js"></script>
    <script type="text/javascript" src="../../axel/src/filters/debug.js"></script>  
    <script type="text/javascript" src="../../axel/src/filters/service.js"></script>
    <script type="text/javascript" src="../../axel/src/filters/date.js"></script> -->
    
    <!-- contributions -->
    <script type="text/javascript" src="../../axel/contribs/src/schemas/schemalogger.js"></script>
    <script type="text/javascript" src="../../axel/contribs/src/schemas/schemaserializer.js"></script>
    
    <!-- optional services -->
    <!-- <script type="text/javascript" src="../../axel/src/filters/signature.js"></script> -->
    <script type="text/javascript" src="../../axel/src/services/service.js"></script>
    <!-- <script type="text/javascript" src="../../axel/src/services/common.js"></script>
    <script type="text/javascript" src="../../axel/src/services/capitalize.js"></script>
    <script type="text/javascript" src="../../axel/src/services/suggest.js"></script>
    <script type="text/javascript" src="../../axel/src/services/translate.js"></script>
    <script type="text/javascript" src="../../axel/src/services/debug.js"></script>
    <script type="text/javascript" src="../../axel/src/services/date.js"></script> -->
    
    <script type="text/javascript" src="../../axel/src/util/ioutils.js"></script>
    <!-- optional goodies because editor.js uses xtiger.debug.loadDocument -->
    <script type="text/javascript" src="../../axel/src/util/debug.js"></script>
    <!-- END XTiger Library Loading -->

    <!-- Demo Viewer Application Loading   -->
    <link rel="stylesheet" href="../../axel/editor/extras/editor.css" type="text/css"></link>

    <!--[if IE 7]>    
  <style type="text/css">
  #frameContainer {
    height: 85%;
  }
  </style>
  <![endif]-->

    <script type="text/javascript" src="../../axel/editor/extras/editor.js"></script>
    <script type="text/javascript">
    var appController;

    // overrides the ones in ../../axel/editor/extras/editor.jf
    // FIXME: do something cleaner that does not depend on evaluation order !
    var _INPUT_FILE = '../../axel/editor/extras/input.html';
    var _INTRO_FILE = 'intro.xhtml';

    function initApp () {                       
      var defaultTemplates = (typeof(getDefaultTemplates) != typeof(undefined))  ? getDefaultTemplates() : [];
      // Application controller
      appController = new viewerApp("../templates/", defaultTemplates);
      appController.setBase('../../axel/axel/bundles')
      appController.setXTigerStylesheet('../../axel/axel/axel.css'); 
    }
    xtdom.addEventListener(window, 'load', initApp, false);
  </script>
  </head>
  <body>
    <div id="formular">
      <form id="formUrl" action="javascript:alert('Oops, something went wrong !')"
        onsubmit="return appController.submitPage();">
        <p>
          <label>Page : <input id="url" type="text" name="url" maxlength="100" value=""/>
          </label>
          <input type="button" value="Browse"
            onclick="appController.localFileDialog(&quot;open&quot;, &quot;*.xtd; *.xhtml; *.html; *.xml&quot;, &quot;Select an XTiger Forms template&quot; , &quot;url&quot;)"/>
          <span style="position: absolute; right: 30px; margin-left: 5px">
            <input type="submit" value="Visualize"/><input type="reset"
              onclick="appController.resetView()"/>
          </span>
        </p>
        <p>
          <label>Page shortcut : <select id="templatesList"
              onchange="appController.updateSelectedTemplate()"> </select>
          </label>
          <input type="button" value="Preferences"
            onclick="appController.setPreferences();"/>
          <span style="position: absolute; left: 46%">
            <input type="button" id="previewToggle" value="Preview"
              onclick="appController.doToggleViewMode();"/>
          </span>
          <span style="position: absolute; right: 30px">
            <input type="button" value="Schema" onclick="appController.dumpSchema();"/>
            <input type="button" value="Dump" onclick="appController.dump();"/>
            <input type="button" value="Input"
              onclick="appController.inputInstanceData();"/>
            <input type="button" value="Save"
              onclick="appController.localSaveInstanceData('fileName');"/>
            <input type="button" value="Load"
              onclick="appController.localLoadInstanceData('fileName');"/>
          </span>
        </p>
        <p id="titleUrl" class="single-line">...</p>
        <div id="preferences">
          <p>
            <label>Template repository : <input id="templateRepos" type="text"
                name="templateRepos" maxlength="50" value=""/>
            </label>
            <input type="button" value="Browse"
              onclick="appController.localFileDialog(&quot;folder&quot;, null, &quot;Select a folder that contains some XTiger Forms templates&quot;, &quot;templateRepos&quot;)"/>
            <input type="button" value="Ok" onclick="appController.savePreferences()"/>
            <input class="hide" type="button" value="Hide"
              onclick="appController.hidePreferences()"/>
            <span style="position: absolute; right: 30px">
              <input type="radio" value="standard" name="algorithm" checked="true"/>
              <label for="robust">Std</label>
              <input type="radio" value="html" name="algorithm"/>
              <label for="html">Html</label>
              <input type="radio" value="robust" name="algorithm"/>
              <label for="robust">Robust</label>
            </span>
          </p>
          <p>
            <label>File name <i>(paths relative to editor.xhtml)</i>: <input
                id="fileName" type="text" name="fileName" maxlength="50" value=""/>
            </label>
            <input type="button" value="Save" onclick="appController.saveToFile()"/>
            <input type="button" value="Load" onclick="appController.loadFromFile()"/>
            <input type="button" value="Dump" onclick="appController.dumpToServer();"
              disabled="disabled"/>
            <i>(remote server only)</i>
            <span style="position: absolute; right: 30px">
              <input type="checkbox" value="Profile" name="profile"/>
              <label for="profile">Profile</label>
            </span>
          </p>
        </div>
      </form>
    </div>
    <div id="frameContainer">
      <iframe id="container" src="intro.xhtml"> iframe content </iframe>
    </div>
  </body>
</html>
